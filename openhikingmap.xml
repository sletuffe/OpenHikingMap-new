<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map
[
  <!ENTITY sea-areas SYSTEM "styles/sea-areas.xml">
	<!ENTITY landuse-lowzoom SYSTEM "styles/landuse-lowzoom.xml">
	<!ENTITY landuse SYSTEM "styles/landuse.xml">
	<!ENTITY landuse-over-hillshade SYSTEM "styles/landuse-over-hillshade.xml">
  <!ENTITY basemap-relief SYSTEM "styles/color-hillshade.xml">
	<!ENTITY water-casing-lowzoom SYSTEM "styles/water-casing-lowzoom.xml">
	<!ENTITY water-fill-lowzoom SYSTEM "styles/water-fill-lowzoom.xml">
	<!ENTITY waterway-lines-lowzoom SYSTEM "styles/waterway-lines-lowzoom.xml">
	<!ENTITY waterway-lines SYSTEM "styles/waterway-lines.xml">
	<!ENTITY waterway-polygons-casing SYSTEM "styles/waterway-polygons-casing.xml">
	<!ENTITY waterway-polygons-fill SYSTEM "styles/waterway-polygons-fill.xml">
	<!ENTITY water-areas SYSTEM "styles/water-areas.xml">
	<!ENTITY landuse-over-water SYSTEM "styles/landuse-over-water.xml">
	<!ENTITY road-areas SYSTEM "styles/road-areas.xml">
	<!ENTITY water-weir SYSTEM "styles/water-weir.xml">
	<!ENTITY waterway-arrows SYSTEM "styles/waterway-arrows.xml">
	<!ENTITY tunnels-casing SYSTEM "styles/tunnels-casing.xml">
	<!ENTITY tunnels-fill SYSTEM "styles/tunnels-fill.xml">
	<!ENTITY tunnels-middle SYSTEM "styles/tunnels-middle.xml">
	<!ENTITY cliffs SYSTEM "styles/cliffs.xml">
	<!ENTITY buildings SYSTEM "styles/buildings.xml">
	<!ENTITY areas SYSTEM "styles/areas.xml">
	<!ENTITY contours SYSTEM "styles/contours.xml">
	<!ENTITY borders-lowzoom SYSTEM "styles/borders-lowzoom.xml">
	<!ENTITY borders SYSTEM "styles/borders.xml">
	<!ENTITY barriers SYSTEM "styles/barriers.xml">
	<!ENTITY railways-lowzoom SYSTEM "styles/railways-lowzoom.xml">
	<!ENTITY railways-embankment SYSTEM "styles/railways-embankment.xml">
	<!ENTITY railways SYSTEM "styles/railways.xml">
	<!ENTITY airports-casing SYSTEM "styles/airports-casing.xml">
	<!ENTITY airports-fill SYSTEM "styles/airports-fill.xml">
	<!ENTITY airports-poly SYSTEM "styles/airports-poly.xml">
	<!ENTITY roads-casing-lowzoom SYSTEM "styles/roads-casing-lowzoom.xml">
	<!ENTITY roads-fill-lowzoom SYSTEM "styles/roads-fill-lowzoom.xml">
  <!ENTITY roads-casing SYSTEM "styles/roads-casing.xml">
  <!ENTITY tracks SYSTEM "styles/tracks.xml">
  <!ENTITY path-in-mountain SYSTEM "styles/path-in-mountain.xml">
	<!ENTITY roads-fill SYSTEM "styles/roads-fill.xml">
	<!ENTITY trams SYSTEM "styles/trams.xml">
	<!ENTITY housenumbers-poly SYSTEM "styles/housenumbers-poly.xml">
	<!ENTITY housenumbers-point SYSTEM "styles/housenumbers-point.xml">
	<!ENTITY road-names-text SYSTEM "styles/road-names-text.xml">
	<!ENTITY railway-points SYSTEM "styles/railway-points.xml">
	<!ENTITY symbols-road SYSTEM "styles/symbols-road.xml">
	<!ENTITY ferry-routes SYSTEM "styles/ferry-routes.xml">
	<!ENTITY railway-bridges-casing SYSTEM "styles/railway-bridges-casing.xml">
	<!ENTITY railway-bridges SYSTEM "styles/railway-bridges.xml">
	<!ENTITY bridges-casing SYSTEM "styles/bridges-casing.xml">
	<!ENTITY bridges-fill SYSTEM "styles/bridges-fill.xml">
	<!ENTITY bridges-middle SYSTEM "styles/bridges-middle.xml">
	<!ENTITY aerialways SYSTEM "styles/aerialways.xml">
	<!ENTITY powerlines SYSTEM "styles/powerlines.xml">
	<!ENTITY powertowers SYSTEM "styles/powertowers.xml">
	<!ENTITY text-cities-lowzoom SYSTEM "styles/text-cities-lowzoom.xml">
	<!ENTITY text-cities SYSTEM "styles/text-cities.xml">
	<!ENTITY text-towns SYSTEM "styles/text-towns.xml">
	<!ENTITY text-villages SYSTEM "styles/text-villages.xml">
  <!ENTITY symbols-sport SYSTEM "styles/symbols-sport.xml">
	<!ENTITY symbols-stations SYSTEM "styles/symbols-stations.xml">
	<!ENTITY text-natural-areas-lowzoom SYSTEM "styles/text-natural-areas-lowzoom.xml">
	<!ENTITY text-natural-areas-highzoom SYSTEM "styles/text-natural-areas-highzoom.xml">
  <!ENTITY text-water-lowzoom SYSTEM "styles/text-water-lowzoom.xml">
	<!ENTITY text-glacier-lowzoom SYSTEM "styles/text-glacier-lowzoom.xml">
	<!ENTITY text-natural-poly SYSTEM "styles/text-natural-poly.xml">
  <!ENTITY symbols-peaks SYSTEM "styles/symbols-peaks.xml">
  <!ENTITY text-peaks SYSTEM "styles/text-peaks.xml">
	<!ENTITY symbols-1 SYSTEM "styles/symbols-1.xml">
	<!ENTITY symbols-2 SYSTEM "styles/symbols-2.xml">
	<!ENTITY symbols-poly SYSTEM "styles/symbols-poly.xml">
	<!ENTITY symbols-point SYSTEM "styles/symbols-point.xml">
	<!ENTITY symbols-viewpoint SYSTEM "styles/symbols-viewpoint.xml">
	<!ENTITY symbols-saddle SYSTEM "styles/symbols-saddle.xml">
	<!ENTITY text-roads-ref SYSTEM "styles/text-roads-ref.xml">
	<!ENTITY text-waterways SYSTEM "styles/text-waterways.xml">
	<!ENTITY % entities SYSTEM "inc/entities.xml.inc">
	%entities;
]>

<!-- background-color:
	zoom 0...8: #117803
	zoom 9+: e0e0e0
-->
<Map background-color="#e0e0e0" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over" buffer-size="256">
	<!-- style definitions -->
	&fontset-settings;
	&landuse-lowzoom;
	&landuse;
	&landuse-over-hillshade;
	&water-casing-lowzoom;
	&water-fill-lowzoom;
	&waterway-lines-lowzoom;
	&waterway-lines;
	&waterway-polygons-casing;
	&waterway-polygons-fill;
	&water-areas;
	&landuse-over-water;
	&road-areas;
	&water-weir;
	&waterway-arrows;
	&tunnels-casing;
	&tunnels-fill;
	&tunnels-middle;
	&cliffs;
	&buildings;
	&areas;
	&borders-lowzoom;
	&borders;
	&barriers;
	&railways-lowzoom;
	&railways-embankment;
	&railways;
	&airports-casing;
	&airports-fill;
	&airports-poly;
	&roads-casing-lowzoom;
	&roads-fill-lowzoom;
  &roads-casing;
  &tracks;
  &path-in-mountain;
	&roads-fill;
	&trams;
	&railway-points;
	&symbols-road;
	&housenumbers-poly;
	&housenumbers-point;
	&ferry-routes;
	&railway-bridges-casing;
	&railway-bridges;
	&road-names-text;
	&bridges-casing;
	&bridges-fill;
	&bridges-middle;
	&aerialways;
	&powerlines;
	&powertowers;
	&text-cities-lowzoom;
	&text-cities;
	&text-towns;
	&text-villages;
  &symbols-sport;
	&symbols-stations;
	&text-natural-areas-lowzoom;
	&text-natural-areas-highzoom;
  &text-water-lowzoom;
	&text-glacier-lowzoom;
  &text-natural-poly;
  &symbols-peaks;
  &text-peaks;
  &symbols-saddle;
  &symbols-1;
	&symbols-2;
	&symbols-poly;
  &symbols-viewpoint;
  &symbols-point;
	&text-roads-ref;
	&text-waterways;

	<!-- layers -->
	
	
	<Layer name="landuse-lowzoom">
		<StyleName>landuse-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,landuse,"natural" FROM landuse) AS landuse </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="landuse">
		<StyleName>landuse</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,way_area,landuse,leisure,"natural",wetland,leaf_type,amenity,crop,orchard FROM planet_osm_polygon WHERE (landuse IS NOT NULL) OR (leisure IS NOT NULL) OR ("natural" IS NOT NULL) OR (wetland IS NOT NULL) OR (leaf_type IS NOT NULL) OR (amenity IS NOT NULL) OR (crop IS NOT NULL) OR (orchard IS NOT NULL) ORDER BY (CASE WHEN landuse='forest' THEN 0 ELSE 1 END) asc) AS landuse </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
  &basemap-relief;
	
	<Layer name="landuse-over-hillshade">
		<StyleName>landuse-over-hillshade</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,landuse,"natural",leaf_type,amenity,building,power FROM planet_osm_polygon WHERE (landuse IS NOT NULL) OR ("natural" IS NOT NULL) OR (leaf_type IS NOT NULL) OR (amenity IS NOT NULL) OR (building IS NOT NULL) OR (power IS NOT NULL)) AS landuse </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
  
  &contours;  
	&sea-areas;
	
	<Layer name="road-areas">
		<StyleName>road-areas</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway FROM planet_osm_polygon WHERE highway IS NOT NULL) AS roadareas</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="water-lowzoom">
		<StyleName>water-casing-lowzoom</StyleName>
		<StyleName>water-fill-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural",water,waterway,way_area,name FROM water) AS water </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="waterway-lines">
		<StyleName>waterway-lines</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"CEMT",intermittent,motorboat,tunnel,waterway FROM planet_osm_line WHERE ("CEMT" IS NOT NULL) OR (intermittent IS NOT NULL) OR (motorboat IS NOT NULL) OR (tunnel IS NOT NULL) OR (waterway IS NOT NULL)) AS water </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="water-polygons">
		<StyleName>waterway-polygons-casing</StyleName>
		<StyleName>waterway-polygons-fill</StyleName>
		<StyleName>water-areas</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"CEMT",motorboat,"natural",landuse,leisure,waterway,intermittent,way_area FROM planet_osm_polygon WHERE (("CEMT" IS NOT NULL) OR (motorboat IS NOT NULL) OR ("natural" IS NOT NULL) OR (landuse IS NOT NULL) OR (leisure IS NOT NULL) OR (waterway IS NOT NULL) OR (intermittent IS NOT NULL))) AS water </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="landuse-over-water">
		<StyleName>landuse-over-water</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural",wetland FROM planet_osm_polygon WHERE ("natural" IS NOT NULL) OR (wetland IS NOT NULL)) AS landuse </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="water-weir-arrows">
		<StyleName>water-weir</StyleName>
		<StyleName>waterway-arrows</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,waterway,intermittent FROM planet_osm_line WHERE (waterway IS NOT NULL) OR (intermittent IS NOT NULL)) AS water </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="tunnels">
		<StyleName>tunnels-casing</StyleName>
		<StyleName>tunnels-fill</StyleName>
		<StyleName>tunnels-middle</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,service,tracktype,oneway,attraction,sport,leisure,surface FROM planet_osm_line WHERE (tunnel = 'yes') AND (highway IS NOT NULL OR attraction='summer_toboggan' OR leisure='track')) AS roads </Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="cliffs-lines">
		<StyleName>cliffs</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural","man_made",highway,barrier,'no' as area FROM planet_osm_line WHERE ("natural" IS NOT NULL) OR ("man_made" IS NOT NULL) OR (highway IS NOT NULL) OR (barrier IS NOT NULL)) AS cliff </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	<Layer name="cliffs-polygons">
		<StyleName>cliffs</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural","man_made",highway,barrier,'yes' as area FROM planet_osm_polygon WHERE ("natural" IS NOT NULL) OR ("man_made" IS NOT NULL) OR (highway IS NOT NULL) OR (barrier IS NOT NULL)) AS cliff </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="buildings">
		<StyleName>buildings</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name FROM planet_osm_polygon WHERE (building IS NOT NULL AND building != 'no') OR (aeroway = 'terminal')) AS buildings </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="areas">
		<StyleName>areas</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,landuse,leisure,way_area FROM planet_osm_polygon WHERE (landuse IS NOT NULL) OR (leisure IS NOT NULL)) AS area </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
  	
	<Layer name="borders-lowzoom">
		<StyleName>borders-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,boundary,admin_level FROM borders) AS borders</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="borders">
		<StyleName>borders</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,boundary,admin_level,name FROM planet_osm_line WHERE boundary IN ('administrative')) AS borders </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="barriers-poly">
		<StyleName>barriers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,barrier,historic,fenced,"natural",ST_Perimeter(way) AS length FROM planet_osm_polygon WHERE (barrier IS NOT NULL) OR (historic IS NOT NULL) OR (fenced IS NOT NULL) OR ("natural" IS NOT NULL)) AS barriers </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	<Layer name="barriers-line">
		<StyleName>barriers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,barrier,historic,fenced,"natural",ST_Length(way) AS length FROM planet_osm_line WHERE (barrier IS NOT NULL) OR (historic IS NOT NULL) OR (fenced IS NOT NULL) OR ("natural" IS NOT NULL)) AS barriers </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railways-lowzoom">
		<StyleName>railways-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,railway,"service",tunnel FROM railways) AS railways</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railways">
		<StyleName>railways-embankment</StyleName>
		<StyleName>railways</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,railway,tunnel,embankment,service FROM planet_osm_line WHERE railway IS NOT NULL) AS railways </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="airports-line">
		<StyleName>airports-casing</StyleName>
		<StyleName>airports-fill</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,aeroway FROM planet_osm_line WHERE aeroway IS NOT NULL) AS airports_line</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="airports-poly">
		<StyleName>airports-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,aeroway,way_area FROM planet_osm_polygon WHERE aeroway IS NOT NULL) AS airports_poly</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="roads-lowzoom">
		<StyleName>roads-casing-lowzoom</StyleName>
		<StyleName>roads-fill-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway FROM roads) AS roads </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="roads">
    <StyleName>roads-casing</StyleName>
    <StyleName>tracks</StyleName>
    <StyleName>roads-fill</StyleName>
		<StyleName>trams</StyleName>
    <StyleName>path-in-mountain</StyleName>
		<Datasource>
      <Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,construction,name,sac_scale,
        CASE 
        WHEN sac_scale = 'hiking' THEN 'T1'
        WHEN sac_scale = 'mountain_hiking' THEN 'T2'
        WHEN sac_scale = 'demanding_mountain_hiking' THEN 'T3'
        WHEN sac_scale = 'alpine_hiking' THEN 'T4'
        WHEN sac_scale = 'demanding_alpine_hiking' THEN 'T5'
        WHEN sac_scale = 'difficult_alpine_hiking' THEN 'T6'
        ELSE NULL 
        END AS sac_grade,
        trail_visibility,via_ferrata_scale,service,surface,tracktype,smoothness,lanes,embankment,oneway,railway,leisure,sport,attraction,tunnel FROM planet_osm_line WHERE (!scale_denominator! &gt; 300000) OR ((bridge IS NULL OR bridge = 'no') AND (tunnel IS NULL OR tunnel != 'yes')) AND (highway IS NOT NULL OR railway='tram' OR leisure='track' OR attraction='summer_toboggan') ORDER BY (CASE WHEN highway IN ('motorway','trunk') THEN 5 WHEN highway='primary' THEN 1 WHEN highway='secondary' THEN 2 WHEN highway='tertiary' THEN 3 ELSE 4 END) DESC ) AS roads</Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railway-points" clear-label-cache="on">
		<StyleName>railway-points</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,railway,station,subway FROM planet_osm_point WHERE (railway IS NOT NULL) OR (station IS NOT NULL) OR (subway IS NOT NULL)) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="ferry-routes">
		<StyleName>ferry-routes</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,route FROM planet_osm_line WHERE route IS NOT NULL) AS route </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railway-bridges">
		<StyleName>railway-bridges-casing</StyleName>
		<StyleName>railway-bridges</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,railway,service,layer FROM planet_osm_line WHERE (bridge != 'no') AND (railway IS NOT NULL) AND (layer IS NULL OR layer &lt;= '1')) AS railways </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="railway-bridges-layer2" group-by="layer">
		<StyleName>railway-bridges-casing</StyleName>
		<StyleName>railway-bridges</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,railway,service,layer FROM planet_osm_line WHERE (bridge != 'no') AND (railway IS NOT NULL) AND (layer &gt; '1')) AS railways </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="bridges">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>trams</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,construction,service,surface,tracktype,layer,name,railway,oneway,leisure,sport,attraction FROM planet_osm_line WHERE (bridge != 'no') AND (highway IS NOT NULL OR railway = 'tram' OR leisure='track' OR attraction='summer_toboggan') AND (layer IS NULL OR layer &lt;= '1')) AS roads </Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="bridges-layer2">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>trams</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,construction,service,surface,tracktype,layer,name,railway,oneway,leisure,sport,attraction FROM planet_osm_line WHERE (bridge != 'no') AND (highway IS NOT NULL OR railway = 'tram' OR leisure='track' OR attraction='summer_toboggan') AND (layer = '2')) AS roads </Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="bridges-layer3" group-by="layer">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>trams</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,construction,service,surface,tracktype,layer,name,railway,oneway,leisure,sport,attraction FROM planet_osm_line WHERE (bridge != 'no') AND (highway IS NOT NULL OR railway = 'tram' OR leisure='track' OR attraction='summer_toboggan') AND (layer &gt; '2')) AS roads </Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="cablecars">
		<StyleName>aerialways</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,aerialway FROM planet_osm_line WHERE aerialway IS NOT NULL) AS aerialway </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="powerlines">
		<StyleName>powerlines</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,power,voltage FROM planet_osm_line WHERE (power IS NOT NULL) OR (voltage IS NOT NULL)) AS powerlines </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	<Layer name="powertowers">
		<StyleName>powertowers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,power FROM planet_osm_point WHERE power IN ('tower','pole')) AS powertowers </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="text-natural-areas-lowzoom">
	 <StyleName>text-natural-areas-lowzoom</StyleName>
	 <Datasource>
	   <Parameter name="table">(SELECT way,name,areatype,way_area,nextregionsize,subregionsize FROM naturalarealabels) AS naturallabels </Parameter>
	   &postgis-settings;
	 </Datasource>
	</Layer>

	
      <Layer name="text-water-lowzoom">
		<StyleName>text-water-lowzoom</StyleName>
		<Datasource>
      <Parameter name="table">(SELECT way,' '&#124;&#124;name&#124;&#124;' ' AS name,lake_area FROM lakelabels WHERE label='lakeaxis' OR label='bayaxis' OR label='straitaxis') AS lakelabels </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="text-natural-poly">
		<StyleName>text-natural-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,"natural",leisure,way_area FROM planet_osm_polygon WHERE (name IS NOT NULL) OR ("natural" IS NOT NULL) OR (leisure IS NOT NULL)) AS names</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="symbols-sport">
		<StyleName>symbols-sport</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,(pitchdata).icon AS icon,(pitchdata).angle AS angle,(pitchdata).pitch_area AS pitch_area,(pitchdata).labelsizefactor AS labelsizefactor FROM (select way,getpitchicon(way,sport) as pitchdata FROM planet_osm_polygon WHERE leisure='pitch' AND (building IS NULL OR building = 'no')) AS pitches) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

    <Layer name="symbols-stations">
		<StyleName>symbols-stations</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,railway,train,subway,station,direction FROM planet_osm_point WHERE (railway='station' OR railway='halt') AND ((direction IS NULL) OR direction SIMILAR TO '[0-9]+')) AS names</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="symbols-peaks">
		<StyleName>symbols-peaks</StyleName>
    <StyleName>text-peaks</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural",name,ele,"summit:cross",otm_isolation::INTEGER FROM planet_osm_point WHERE ("natural" = 'peak' or "natural" = 'volcano') ORDER BY otm_isolation::INTEGER DESC) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
  
	<Layer name="symbols-poly">
		<StyleName>symbols-1</StyleName>
		<StyleName>symbols-2</StyleName>
		<StyleName>symbols-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,access,amenity,shelter_type,highway,historic,"memorial:type",castle_type,religion,denomination,denotation,fee,man_made,"tower:type","communication:radio","communication:television",'('&#124;&#124;substring(height from '^[\d]+')&#124;&#124;')' as height,building,"natural",name,ele,ruins,NULL AS "summit:cross",tourism,"power","generator:source","site_type",leisure,sport,leaf_type,disused,abandoned,railway,otm_isolation::INTEGER,hiking,way_area FROM planet_osm_polygon) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="symbols-point">
		<StyleName>symbols-1</StyleName>
		<StyleName>symbols-2</StyleName>
		<StyleName>symbols-point</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,access,amenity,barrier,shelter_type,highway,historic,"memorial:type",castle_type,leaf_type,religion,denomination,denotation,fee,man_made,"tower:type","communication:radio","communication:television",'('&#124;&#124;substring(height from '^[\d]+')&#124;&#124;')' as height,building,"natural",name,ele,ruins,"summit:cross",tourism,"power","generator:source","site_type",sport,disused,abandoned,railway,train,subway,otm_isolation::INTEGER,hiking FROM planet_osm_point) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="symbols-saddle">
		<StyleName>symbols-saddle</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural",direction,name,ele FROM planet_osm_point where ("natural"='saddle' or "natural"='col' or "natural"='notch') ) AS symbols </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
  <Layer name="symbols-viewpoint">
    <StyleName>symbols-viewpoint</StyleName>
    <Datasource>
      <Parameter name="table">(SELECT way,tourism,ele,(int_dir).s1 as firstrotation,(int_dir).a1 as firstangle,(int_dir).s2 as secondrotation,(int_dir).a2 as secondangle FROM (SELECT way,tourism,ele,viewpointdirection(direction) AS int_dir FROM planet_osm_point WHERE (tourism='viewpoint')) AS viewpoints) AS symbols</Parameter>
      &postgis-settings;
    </Datasource>
  </Layer>
  
    <Layer name="text-glacier-lowzoom">
		<StyleName>text-glacier-lowzoom</StyleName>
		<Datasource>
      <Parameter name="table">(SELECT way,name,lake_area FROM lakelabels WHERE label='glacieraxis') AS lakelabels </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="text-natural-areas-highzoom">
	 <StyleName>text-natural-areas-highzoom</StyleName>
	 <Datasource>
	   <Parameter name="table">(SELECT way,name,areatype,way_area,nextregionsize,subregionsize FROM naturalarealabels) AS naturallabels </Parameter>
	   &postgis-settings;
	 </Datasource>
	</Layer>

	<Layer name="road-names-text">
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,name,service,surface,tracktype,lanes,embankment,oneway FROM planet_osm_line WHERE (!scale_denominator! &gt; 300000) OR ((bridge IS NULL OR bridge = 'no') AND (tunnel IS NULL OR tunnel != 'yes')) AND ((highway IS NOT NULL AND highway!='construction') OR (leisure='track' AND sport='bobsleigh') OR attraction='summer_toboggan') ORDER BY (CASE WHEN highway IN ('motorway','trunk') THEN 5 WHEN highway='primary' THEN 1 WHEN highway='secondary' THEN 2 WHEN highway='tertiary' THEN 3 ELSE 4 END) DESC ) AS roads</Parameter> 
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="building-housenumbers-polygons">
		<StyleName>housenumbers-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"addr:housenumber",name,building,way_area FROM planet_osm_polygon WHERE building IS NOT NULL) AS housenumbers </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	<Layer name="building-housenumbers-points">
		<StyleName>housenumbers-point</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"addr:housenumber",name,building FROM planet_osm_point WHERE "addr:housenumber" IS NOT NULL) AS housenumbers </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="text-roads-ref">
		<StyleName>text-roads-ref</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway,ref FROM planet_osm_line WHERE (ST_Length(way)::integer &gt; 1000) AND ref IS NOT NULL) AS roads </Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="text-waterways">
		<StyleName>text-waterways</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,waterway FROM planet_osm_line WHERE waterway IS NOT NULL) AS names</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
	
	<Layer name="text-cities-lowzoom">
		<StyleName>text-cities-lowzoom</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,admin_level,name,capital,place,population FROM cities ORDER BY population DESC) AS cities</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>

	<Layer name="text-cities" clear-label-cache="on">
		<StyleName>text-cities</StyleName>
		<StyleName>text-towns</StyleName>
		<StyleName>text-villages</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,admin_level,name,capital,'('&#124;&#124;substring(ele from '^[\d]+')&#124;&#124;')' as ele,place,population::INTEGER FROM planet_osm_point WHERE (population IS NULL OR population SIMILAR TO '[[:digit:]]+') AND place IN ('city','town','village','suburb','hamlet','isolated_dwelling','locality') ORDER BY (CASE WHEN place='city' THEN 0 WHEN place='town' THEN 1 WHEN place='village' THEN 2 ELSE 3 END) ASC, (CASE WHEN population IS NUll THEN 0 WHEN population similar to '[[:digit:]]+' THEN population::integer ELSE 0 END) DESC
		  ) AS names</Parameter>
			&postgis-settings;
		</Datasource>
	</Layer>
</Map>
